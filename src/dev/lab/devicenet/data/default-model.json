{"mappings":[{"name":"default","entities":[{"name":"Devices","primaryKey":["id"],"uniqueKey":["name"],"properties":[{"name":"id","length":32,"nullable":false,"type":"string","mapping":"id"},{"name":"type","length":16,"nullable":false,"type":"string","mapping":"type"},{"name":"name","length":32,"nullable":false,"type":"string","mapping":"name"},{"name":"groupId","length":32,"type":"string","mapping":"groupId"},{"name":"password","writeValue":"encrypt(password,\"$$DEVICES_SECRET_KEY\")","readValue":"decrypt(password,\"$$DEVICES_SECRET_KEY\")","type":"string","length":80,"mapping":"password"},{"name":"so","length":32,"type":"string","mapping":"so"},{"name":"imei","length":16,"type":"string","mapping":"imei"},{"name":"imei2","length":16,"type":"string","mapping":"imei2"},{"name":"mac","length":24,"type":"string","mapping":"mac"},{"name":"macBluetooth","length":24,"type":"string","mapping":"macBluetooth"},{"name":"ip","length":24,"type":"string","mapping":"ip"},{"name":"brand","length":32,"type":"string","mapping":"brand"},{"name":"model","length":32,"type":"string","mapping":"model"},{"name":"serialNumber","length":32,"type":"string","mapping":"serialNumber"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"group","from":"groupId","entity":"Groups","to":"id","type":"oneToMany","weak":false},{"name":"components","type":"manyToOne","from":"id","entity":"Components","to":"deviceId","composite":true,"weak":true},{"name":"journeys","type":"manyToOne","from":"id","entity":"Journeys","to":"deviceId","weak":true},{"name":"files","type":"manyToOne","from":"id","entity":"Files","to":"deviceId","weak":true}],"indexes":[],"dependents":[{"entity":"Components","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany","weak":false}},{"entity":"DeviceStatuses","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany","weak":false}},{"entity":"Journeys","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany","weak":false}},{"entity":"Files","relation":{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":true,"hadWriteValues":true,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Devices","hadKeys":false},{"name":"Components","primaryKey":["id"],"uniqueKey":["deviceId","name"],"properties":[{"name":"id","length":50,"nullable":false,"default":"concat(deviceId,\"-\",lower(substring(replace(name,\" \",\"-\"),0,16)))","type":"string","mapping":"id"},{"name":"deviceId","length":32,"nullable":false,"type":"string","mapping":"deviceId"},{"name":"name","length":16,"nullable":false,"type":"string","mapping":"name"},{"name":"type","length":16,"nullable":false,"type":"string","mapping":"type"},{"name":"brand","length":32,"type":"string","mapping":"brand"},{"name":"model","length":32,"type":"string","mapping":"model"},{"name":"serialNumber","length":32,"type":"string","mapping":"serialNumber"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany","weak":false},{"name":"files","type":"manyToOne","from":"id","entity":"Files","to":"componentId","weak":true}],"indexes":[],"dependents":[{"entity":"Files","relation":{"name":"component","from":"componentId","entity":"Components","to":"id","type":"oneToMany","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Components","hadKeys":false},{"name":"DeviceStatuses","primaryKey":["id"],"indexes":[{"name":"time","fields":["time"]}],"properties":[{"name":"id","type":"integer","nullable":false,"autoIncrement":true,"mapping":"id"},{"name":"deviceId","length":32,"nullable":false,"type":"string","mapping":"deviceId"},{"name":"journeyId","type":"integer","mapping":"journeyId"},{"name":"cpu","type":"decimal","mapping":"cpu"},{"name":"cpuTemperature","type":"decimal","mapping":"cpuTemperature"},{"name":"battery","type":"decimal","mapping":"battery"},{"name":"wifiSignal","type":"decimal","mapping":"wifiSignal"},{"name":"time","type":"datetime","nullable":false,"mapping":"time"},{"name":"registered","type":"datetime","default":"now()","mapping":"registered"},{"name":"latitude","type":"decimal","mapping":"latitude"},{"name":"longitude","type":"decimal","mapping":"longitude"},{"name":"altitude","type":"decimal","mapping":"altitude"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany","weak":false},{"name":"journey","from":"journeyId","entity":"Journeys","to":"id","type":"oneToMany","weak":false}],"uniqueKey":[],"dependents":[{"entity":"Journeys","relation":{"name":"start","from":"startId","entity":"DeviceStatuses","to":"id","type":"oneToMany","weak":false}},{"entity":"Journeys","relation":{"name":"end","from":"endId","entity":"DeviceStatuses","to":"id","type":"oneToMany","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"DeviceStatuses","hadKeys":false},{"name":"Journeys","primaryKey":["id"],"indexes":[{"name":"deviceId","fields":["deviceId"]}],"properties":[{"name":"id","type":"integer","nullable":false,"autoIncrement":true,"mapping":"id"},{"name":"deviceId","length":32,"nullable":false,"type":"string","mapping":"deviceId"},{"name":"startId","type":"integer","mapping":"startId"},{"name":"endId","type":"integer","mapping":"endId"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany","weak":false},{"name":"start","from":"startId","entity":"DeviceStatuses","to":"id","type":"oneToMany","weak":false},{"name":"end","from":"endId","entity":"DeviceStatuses","to":"id","type":"oneToMany","weak":false},{"name":"statuses","type":"manyToOne","composite":true,"from":"id","entity":"DeviceStatuses","to":"journeyId","weak":true}],"uniqueKey":[],"dependents":[{"entity":"DeviceStatuses","relation":{"name":"journey","from":"journeyId","entity":"Journeys","to":"id","type":"oneToMany","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Journeys","hadKeys":false},{"name":"Files","primaryKey":["id"],"properties":[{"name":"id","length":255,"nullable":false,"type":"string","mapping":"id"},{"name":"type","length":16,"nullable":false,"type":"string","mapping":"type"},{"name":"deviceId","length":32,"nullable":false,"type":"string","mapping":"deviceId"},{"name":"componentId","length":50,"type":"string","mapping":"componentId"},{"name":"startDate","type":"datetime","nullable":false,"mapping":"startDate"},{"name":"endDate","type":"datetime","nullable":false,"mapping":"endDate"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"device","from":"deviceId","entity":"Devices","to":"id","type":"oneToMany","weak":false},{"name":"component","from":"componentId","entity":"Components","to":"id","type":"oneToMany","weak":false}],"constraints":[{"message":"start cannot be less than end","condition":"start<=end"}],"uniqueKey":[],"indexes":[],"dependents":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Files","hadKeys":false},{"name":"Users","primaryKey":["username"],"uniqueKey":["email"],"properties":[{"name":"username","length":32,"nullable":false,"type":"string","mapping":"username"},{"name":"firstname","nullable":false,"type":"string","length":80,"mapping":"firstname"},{"name":"lastname","nullable":false,"type":"string","length":80,"mapping":"lastname"},{"name":"email","nullable":false,"length":512,"writeValue":"encrypt(lower(email),\"$$USERS_SECRET_KEY\")","readValue":"decrypt(email,\"$$USERS_SECRET_KEY\")","type":"string","mapping":"email"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"members","type":"manyToOne","from":"username","entity":"GroupUsers","to":"username","weak":true}],"constraints":[{"message":"invalid email","condition":"test(email,\"^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$\")"}],"indexes":[],"dependents":[{"entity":"GroupUsers","relation":{"name":"user","from":"username","entity":"Users","to":"username","type":"oneToMany","weak":false}}],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":true,"hadWriteValues":true,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Users","hadKeys":false},{"name":"Groups","primaryKey":["id"],"uniqueKey":["name"],"properties":[{"name":"id","length":32,"default":"lower(substring(replace(name,\" \",\"-\"),0,32))","nullable":false,"type":"string","mapping":"id"},{"name":"name","length":32,"nullable":false,"type":"string","mapping":"name"},{"name":"created","type":"datetime","default":"now()","mapping":"created"}],"relations":[{"name":"members","type":"manyToOne","from":"id","entity":"GroupUsers","to":"groupId","composite":true,"weak":true},{"name":"devices","type":"manyToOne","from":"id","entity":"Devices","to":"groupId","composite":true,"weak":true}],"indexes":[],"dependents":[{"entity":"Devices","relation":{"name":"group","from":"groupId","entity":"Groups","to":"id","type":"oneToMany","weak":false}},{"entity":"GroupUsers","relation":{"name":"group","from":"groupId","entity":"Groups","to":"id","type":"oneToMany","weak":false}}],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":true,"hadViewReadExp":false,"mapping":"Groups","hadKeys":false},{"name":"GroupUsers","primaryKey":["id"],"uniqueKey":["groupId","username"],"properties":[{"name":"id","type":"integer","nullable":false,"autoIncrement":true,"mapping":"id"},{"name":"username","length":32,"nullable":false,"type":"string","mapping":"username"},{"name":"groupId","length":32,"nullable":false,"type":"string","mapping":"groupId"},{"name":"rol","length":32,"nullable":false,"type":"string","mapping":"rol"}],"relations":[{"name":"group","from":"groupId","entity":"Groups","to":"id","type":"oneToMany","weak":false},{"name":"user","from":"username","entity":"Users","to":"username","type":"oneToMany","weak":false}],"indexes":[],"dependents":[],"constraints":[],"composite":false,"hadReadExps":false,"hadWriteExps":false,"hadReadValues":false,"hadWriteValues":false,"hadDefaults":false,"hadViewReadExp":false,"mapping":"GroupUsers","hadKeys":false}]}]}